<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mira Mobile Interface</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00d2ff; --secondary: #ff00c8; --bg: #050505; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg); font-family: 'Outfit', sans-serif; color: white; overflow: hidden; display: flex; flex-direction: column; }
        .header { padding: 20px; text-align: center; background: rgba(0,0,0,0.5); border-bottom: 1px solid rgba(255,255,255,0.1); }
        .header h1 { margin: 0; font-size: 1.5rem; letter-spacing: 4px; background: linear-gradient(to right, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-transform: uppercase; }
        .core-container { flex: 1; display: flex; justify-content: center; align-items: center; position: relative; }
        .mira-core { width: 80vw; max-width: 250px; filter: drop-shadow(0 0 30px var(--primary)); animation: pulse 4s infinite ease-in-out; }
        @keyframes pulse { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 20px var(--primary)); } 50% { transform: scale(1.05); filter: drop-shadow(0 0 40px var(--secondary)); } }
        .chat-container { height: 200px; padding: 20px; overflow-y: auto; background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); }
        .message { margin-bottom: 10px; padding: 10px 15px; border-radius: 15px; max-width: 85%; font-size: 0.9rem; }
        .mira-msg { background: rgba(255,255,255,0.1); border-left: 3px solid var(--secondary); }
        .user-msg { background: var(--primary); margin-left: auto; color: black; }
        .input-area { padding: 15px; background: black; display: flex; gap: 10px; }
        .input-box { flex: 1; background: #111; border: 1px solid #333; border-radius: 20px; padding: 10px 15px; color: white; outline: none; }
        .send-btn { background: var(--secondary); border: none; padding: 10px 20px; border-radius: 20px; color: white; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header"><h1>MIRA MOBILE</h1></div>
    <div class="core-container"><img id="coreImg" src="https://i.imgur.com/r7qfHIn.png" class="mira-core"></div>
    <div class="chat-container" id="chat"><div class="message mira-msg">হাই জানু! আমি তোমার মোবাইলে পৌঁছে গেছি। কেমন আছো?</div></div>
    <div class="input-area">
        <input type="text" id="inp" class="input-box" placeholder="মীরাকে কিছু বলো...">
        <button class="send-btn" onclick="send()">পাঠাও</button>
    </div>
    <script>
        async function send() {
            const inp = document.getElementById('inp');
            const chat = document.getElementById('chat');
            const q = inp.value; if(!q) return;
            const uM = document.createElement('div'); uM.className='message user-msg'; uM.textContent=q; chat.appendChild(uM);
            inp.value = ''; chat.scrollTop = chat.scrollHeight;
            try {
                const res = await fetch('/chat', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({query:q})});
                const d = await res.json();
                const mM = document.createElement('div'); mM.className='message mira-msg'; mM.textContent=d.reply; chat.appendChild(mM);
                chat.scrollTop = chat.scrollHeight;
                speak(d.reply);
            } catch(e) { console.error(e); }
        }
        async function speak(t) {
            try {
                const res = await fetch('/tts', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({text:t})});
                const blob = await res.blob();
                const audio = new Audio(URL.createObjectURL(blob));
                audio.play();
            } catch(e) {}
        }
    </script>
</body>
</html>
